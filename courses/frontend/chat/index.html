<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>English Students Hub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="securityAlert" class="security-alert">
        <i class="fas fa-shield-alt"></i>
        <span id="alertMessage">Security Alert</span>
    </div>

    <nav class="navbar">
        <div class="nav-brand"><i class="fas fa-graduation-cap"></i> EduChat</div>
        <div class="user-controls">
            <button id="themeToggle" class="btn-icon" title="Toggle Theme"><i class="fas fa-moon"></i></button>
            
            <button id="loginBtn" class="btn-primary">
                Sign in with Google
            </button>
            
            <div id="userInfo" class="hidden">
                <img id="userAvatar" src="" alt="User">
                <span id="userName" style="font-weight:600; font-size:0.9rem;"></span>
                <button id="logoutBtn" class="btn-icon"><i class="fas fa-sign-out-alt"></i></button>
            </div>
        </div>
    </nav>

    <main class="chat-wrapper">
        <div class="messages-container" id="messagesList">
            </div>

        <div class="input-area">
            <div id="replyPreview" class="reply-context hidden" style="background:var(--bg-secondary); border:1px solid var(--primary-color);">
                <div style="display:flex; justify-content:space-between;">
                    <span>Replying to <b id="replyToUser">User</b></span>
                    <button id="cancelReplyBtn" style="background:none; border:none; color:var(--text-secondary); cursor:pointer;"><i class="fas fa-times"></i></button>
                </div>
            </div>

            <form id="messageForm" class="message-form">
                <input type="text" id="msgInput" placeholder="Type in English..." autocomplete="off" disabled>
                <button type="submit" id="sendBtn" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </form>
        </div>
    </main>

    <div id="setupModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Welcome Student! ðŸŽ“</h2>
            <p style="color:var(--text-secondary); font-size:0.9rem; margin-bottom:20px;">
                To maintain a high-quality learning environment, please confirm your details.
            </p>
            
            <input type="text" id="setupDisplayName" placeholder="Enter your Name (English Only)" 
                   style="width:100%; padding:12px; border-radius:8px; border:1px solid var(--border-color); background:var(--bg-input); color:var(--text-primary); box-sizing:border-box;">

            <div style="text-align:left; margin-top:20px; display:flex; flex-direction:column; gap:10px;">
                <label style="font-size:0.85rem; display:flex; align-items:center; gap:10px;">
                    <input type="checkbox" class="setup-checkbox"> I promise to speak English only.
                </label>
                <label style="font-size:0.85rem; display:flex; align-items:center; gap:10px;">
                    <input type="checkbox" class="setup-checkbox"> I will be respectful to others.
                </label>
            </div>

            <button id="completeSetupBtn" class="btn-primary full-width" disabled>Join Class</button>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>
